<tui-root>
  <div *ngIf="!isServicesRoute">
    <div class="custom-header">
      <div class="left-section">
        <img src="assets/Logo.svg" class="logo-img" />
      </div>
      <div class="center-section">
        <tui-tabs class="menu1" [(activeItemIndex)]="index1">
          <a tuiTab routerLink="/services" routerLinkActive="active">Сервисы</a>
          <a tuiTab routerLink="/products" routerLinkActive="active"
            >Продукты</a
          >
          <a tuiTab routerLink="/contacts" routerLinkActive="active"
            >Контакты</a
          >
        </tui-tabs>
      </div>
      <div class="right-section">
        <!-- Строка поиска вне зависимости от состояния авторизации -->
        <form class="b-form" [formGroup]="searchForm">
          <tui-input
            tuiTextfield
            tuiTextfieldIconLeft="tuiIconSearch"
            tuiTextfieldSize="s"
            [tuiTextfieldCleaner]="true"
            formControlName="searchValue"
          >
            <input type="text" tuiTextfield placeholder="Поиск..." />
            Поиск
          </tui-input>
        </form>

        <!-- Отображение табов для авторизованных пользователей -->
        <tui-tabs class="menu2" [(activeItemIndex)]="index2" *ngIf="isLoggedIn">
          <a tuiTab routerLink="/cart" routerLinkActive="active">
            <tui-svg src="tuiIconShoppingCart" class="icon-profile"></tui-svg>
          </a>
          <a
            tuiTab
            routerLink="/personal-cabinet/notifications"
            routerLinkActive="active"
          >
            <tui-svg src="tuiIconBell" class="icon-profile"></tui-svg>
          </a>
          <tui-hosted-dropdown
            tuiDropdownHover
            [content]="content"
            [(open)]="open"
          >
            <a tuiTab routerLinkActive="active" (click)="openPersonalCabinet()">
              <tui-svg src="tuiIconUser" class="icon-profile"></tui-svg>
            </a>
            <ng-template #content>
              <tui-data-list size="s" (click)="onClick()">
                <button routerLink="/personal-cabinet" tuiOption>
                  <tui-svg src="tuiIconHome"></tui-svg> Личный кабинет
                </button>
                <button
                  size="s"
                  appearance="mono"
                  tuiButton
                  icon="tuiIconLogOut"
                  (click)="logout()"
                >
                  Выйти
                </button>
              </tui-data-list>
            </ng-template>
          </tui-hosted-dropdown>
        </tui-tabs>

        <!-- Отображение элементов для неавторизованных пользователей -->
        <tui-hosted-dropdown
          tuiDropdownHover
          [content]="contentUnauth"
          [(open)]="open"
          *ngIf="!isLoggedIn"
        >
          <a tuiTab routerLinkActive="active">
            <tui-svg src="tuiIconUser" class="icon-profile"></tui-svg>
          </a>
          <ng-template #contentUnauth>
            <tui-data-list size="s" (click)="onClick()">
              <button routerLink="/login" tuiOption>
                <tui-svg src="tuiIconLogIn" class="icon-profile"></tui-svg> Вход
              </button>
              <button routerLink="/register" tuiOption>
                <tui-svg src="tuiIconUserPlus" class="icon-profile"></tui-svg>
                Регистрация
              </button>
            </tui-data-list>
          </ng-template>
        </tui-hosted-dropdown>
      </div>
    </div>

    <!-- Sidebar для всех рутов, кроме /services -->
    <div class="content">
      <app-sidebar></app-sidebar>
      <router-outlet></router-outlet>
    </div>
  </div>

  <div *ngIf="isServicesRoute">
    <!-- Контент для /services -->
    <app-services></app-services>
  </div>
</tui-root>
