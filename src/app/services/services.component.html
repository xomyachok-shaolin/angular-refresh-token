<tui-root>
  <div class="custom-header">
    <div class="left-section">
      <img src="assets/Logo.svg" class="logo-img" />
    </div>
    <div class="right-section">
      <button size="m" tuiButton (click)="goBack()">Вернуться на портал</button>
    </div>
  </div>

  <!-- Main content area -->
  <div class="content">
    <div class="main-container">
      <div class="left-panel">
        <!-- Leaflet map placeholder -->
        <div id="map" style="height: 100%; border-radius: 16px"></div>
      </div>
      <div class="right-panel">
        <tui-accordion>
          <!-- Service selection accordion item -->
          <tui-accordion-item [open]="true">
            <div tuiAccordionItemTitle>Выбор услуги</div>
            <div tuiAccordionItemContent>
              <tui-combo-box
                tuiDropdownMobile
                [tuiTextfieldCleaner]="true"
                [(ngModel)]="selectedService"
                (ngModelChange)="onServiceChange($event)"
                (input)="filterServices($event)"
                [valueContent]="getServiceTitle(selectedService)"
                [stringify]="getServiceTitle"
              >
                Услуга
                <tui-data-list-wrapper
                  *tuiDataList
                  [items]="filteredServices"
                  [itemContent]="serviceTemplate"
                ></tui-data-list-wrapper>
              </tui-combo-box>
            </div>
          </tui-accordion-item>

          <!-- Parameters selection accordion item -->
          <tui-accordion-item>
            <div tuiAccordionItemTitle>Выбор параметров</div>
            <div tuiAccordionItemContent>
              <tui-select
                class="tui-space_vertical-4"
                [tuiDropdownMobile]="'Select parameter'"
                [tuiTextfieldLabelOutside]="true"
                [(ngModel)]="selectedParameter"
                (ngModelChange)="onParameterChange($event)"
                (input)="filterParameters($event)"
                [valueContent]="getParameterTitle(selectedParameter)"
                [stringify]="getParameterTitle"
              >
                <tui-data-list-wrapper
                  *tuiDataList
                  [items]="filteredParameters"
                  [itemContent]="parameterTemplate"
                ></tui-data-list-wrapper>
              </tui-select>
              <button 
                size="m" 
                tuiButton 
                *ngIf="!isDrawingEnabled"
                (click)="startDrawing()"
              >
                Нажмите для выбора территории
              </button>
              <button 
                size="m" 
                tuiButton 
                *ngIf="isDrawingEnabled" 
                [disabled]="isConfirmDisabled"
              >
                Для подтверждения нажмите Enter
              </button>
            </div>
          </tui-accordion-item>

          <!-- Calculation accordion item -->
          <tui-accordion-item>
            <div tuiAccordionItemTitle>Расчет</div>
            <div tuiAccordionItemContent>Расчет</div>
          </tui-accordion-item>

          <!-- Checkout accordion item -->
          <tui-accordion-item>
            <div tuiAccordionItemTitle>Оформление</div>
            <div tuiAccordionItemContent>Оформление</div>
          </tui-accordion-item>
        </tui-accordion>
      </div>
    </div>
  </div>

  <ng-template #serviceTemplate let-item>
    {{ item.title }}
  </ng-template>

  <ng-template #parameterTemplate let-item>
    {{ item.title }}
  </ng-template>
</tui-root>
